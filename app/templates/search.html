<html>

<head>
    <link rel="shortcut icon" href="">
    <link rel="stylesheet" href="/static/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="/static/Skeleton-2.0.4/css/skeleton.css"> -->
    <link rel="stylesheet" href="../static/main.css">
    <link rel="stylesheet" href="../static/styling.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,400;0,500;0,600;0,700;1,600&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- <div class="topcorner">
        <p class="name">Project Name: {{ name }}</p>
        <p>Student Names: {{ netid }}</p>
    </div> -->
    <form class="form-inline global-search" id="question" name="questionform">
        <h1 class=" header">
            gifter.aiüéÅ
        </h1>

        <br><br>

        <h4 class="subtitle"> let's help you find the perfect gift for someone! </h4>

        <br />
        <br />
        <br />
        <br />
        <h5 class="question"> what's the occasion? </h5>
        <br>
        <br>

        <div class="occasion-div">
            <button type="button" name="occasion" value="birthday" class="occasion ripple opt-btn default-mode">birthday
                <span class="emoji">üéà</span> </button>
            <button type="button" name="occasion" value="wedding" class="occasion ripple opt-btn default-mode"> wedding
                <span class="emoji">üë∞</span> </button>
            <button type="button" name="occasion" value="holidays" class="occasion ripple opt-btn default-mode">
                holidays <span class="emoji">‚ùÑÔ∏è</span></button>
            <button type="button" name="occasion" value="other" class="occasion ripple opt-btn default-mode"> ¬Ø\_(„ÉÑ)_/¬Ø
                <span class="emoji">ü§∑</span></button>
        </div>
        </br>

        <br />
        <br />
        <h5 class="question">how old is the recipient?</h5>
        <br>

        <div class="age-div">
            <br />
            <button type="button" name="age" value="babies" class="ripple opt-btn default-mode age"> babies <span
                    class="emoji">üë∂</span></button>
            <button type="button" name="age" value="children" class="ripple opt-btn default-mode age"> children
                <span class="emoji">üßí</span></button>
            <button type="button" name="age" value="adults" class="ripple opt-btn default-mode age"> adults <span
                    class="emoji">üôç</span></button>
            <button type="button" name="age" value="elders" class="ripple opt-btn default-mode age"> elderly <span
                    class="emoji">üßì</span></button>
        </div>
        </br>

        <br />
        <br />
        <h5 class="question">what is your budget?</h5>
        <br>
        <div>
            <br />
            <input type="range" min="0" max="100" step="5" value="50" class="slider" id="myRange" name="price">

            <p>$<span id="demo"></span></p>
        </div>
        <br>
        <br>
        <br />
        <!-- <input type="text" class="sliderValue" data-index="0" value="10" /> -->
        <!-- <input type="text" class="sliderValue" data-index="1" value="90" /> -->

        <!-- <div id="slider"></div> -->



        <h5 class="question">the person I'm gifting enjoys...</h5>
        <br>
        <br>


        <div id="presentOpenGif" style="display:none"><img
                src="https://cdn.clipart.email/67ae0013b5db01b6654ce772a2ad9d9c_gifts-clipart-animated-gif-gifts-animated-gif-transparent-free-_800-800.gif"
                alt="present" class="animated-gif">
        </div>
        <br>

        <div class="form-group">
            <input id="input" type="text" name="search" class="form-control"
                placeholder="enter a hobby or activity e.g. drawing, camping">
        </div>
        <span id="fake-age-span">
            <input id="fake-age" type="text" name="age-input" class="form-control">
        </span>
        <span id="fake-occasion-span">
            <input id="fake-occasion" type="text" name="occasion-input" class="form-control">
        </span>


        <br>
        <br>
        <button type="submit" class="submit-btn ripple default-mode"> surprise me! <span
                class="emoji">ü§©</span></button>

        <br />
        <br />


    </form>


    <script>
        var slider = document.getElementById("myRange");
        var output = document.getElementById("demo");
        output.innerHTML = slider.value;

        slider.oninput = function () {
            output.innerHTML = this.value;
        }


        $("button[type=submit]").click(function () {
            document.getElementById('presentOpenGif').style.display = "block";
            setTimeout(function () {
                document.getElementById('presentOpenGif').style.display = "none";
            }, 2000);
            // $(document).ready(function () {
            //     var elmnt = document.getElementById("results-begin");
            //     elmnt.scrollIntoView();
            // });

        });

        $(document).ready(function () {
            $("button[type=submit]").click(function (e) {
                document.cookie = 1;
                reload = true;
                location.reload();

            })
            if (document.cookie == 1) {
                document.cookie = "0";
                $('html, body').animate({
                    scrollTop: $("#results-begin").offset().top
                }, 1000);
            }
        })

        jQuery("button[type=button]").click(function () {
            jQuery(this).toggleClass('active');
            $(this).siblings().removeClass('active')
            $(this).siblings().removeClass('button-clicked')
            jQuery(this).toggleClass('button-clicked');

            var fired_button = $(this).val();
            if (this.className.includes("age")) {
                document.getElementById("fake-age").value = fired_button;
                document.getElementById("fake-age").innerHTML = this.value;
            }
            else if (this.className.includes("occasion")) {
                document.getElementById("fake-occasion").value = fired_button;
                document.getElementById("fake-occasion").innerHTML = this.value;
            }
        });


        $("#slider").slider({
            min: 0,
            max: 100,
            step: 1,
            values: [10, 90],
            slide: function (event, ui) {
                for (var i = 0; i < ui.values.length; ++i) {
                    $("input.sliderValue[data-index=" + i + "]").val(ui.values[i]);
                }
            }
        });

        $("input.sliderValue").change(function () {
            var $this = $(this);
            $("#slider").slider("values", $this.data("index"), $this.val());
        });

        function reload(product_id) {
            var img = document.getElementById("target" + product_id);
            h = img.height;
            w = img.width;
            if (h <= 1 && w <= 1) {
                img.src = "https://cdn.dribbble.com/users/873288/screenshots/5396884/giftbox-404.jpg";
            }
            $(img).addClass("product-img");
        };

        function retext(product_id, reviewText) {
            document.getElementById('reviewtext' + product_id).innerHTML = reviewText;

        };
    </script>

    <br>
    <br>
    <br>
    <br>
    <br>
    <br>



    <form class="form-inline global-search">
        {% if data %}
        {% if top_output_message %}
        <h1 id="results-begin">{{top_output_message}}</h1> {% endif %}
        <h1 id="results-begin">{{output_message}}</h1>
        <br>
        <br>
        <div id="results">{% for d in data %}</div>
        <br>
        <div class="container result-box">
            <div class="row">
                <div class="col-sm-6 info-box">
                    <!--title-->
                    <p class="product-title">{{d[1]}}</p>

                    <!-- price -->
                    <p class="product-price">{{d[7]}}</p>

                    <!--image-->
                    {% set list1 = d[6].split(',') %}


                    <img id="target{{d[0]}}" class="pre-image"
                        src="http://images.amazon.com/images/P/{{d[0]}}.01._SCTZZZZZZZ_.jpg"
                        onload="reload('{{d[0]}}')">

                </div>


                <div class="col-sm-6 data-box">
                    <div class="review-box over-scroll">
                        <p class="relevant-reviews"> Top Relevant Reviews: </p>
                        <br><br>
                        <p id="reviewtext{{d[0]}}" class="review-text"> <span class="make-bold"> {{d[2]}}</span>
                            {{d[4]}}
                        </p>
                        <!-- review 1-->
                        <p id="reviewtext{{d[0]}}" class="review-text"><span class="make-bold"> {{d[3]}}</span> {{d[5]}}
                        </p>
                        <!-- review 2-->
                    </div>



                    <!-- document.getElementById('test').innerHTML= temp -->
                    <!-- 
                    <div id='test'></div>

                    document.getElementById("mytableid").innerHTML += "<tr>
                        <td>str</td>
                    </tr>"; -->

                    <div class="link-box">
                        <br>

                        <a href="http://www.amazon.com/dp/{{d[0]}}" class="link" target="_blank">Click here
                            to
                            see
                            this
                            product on
                            Amazon!</a>
                    </div>
                </div>
            </div>



            {% endfor %}
            {% endif %}
    </form>


</body>


</html>